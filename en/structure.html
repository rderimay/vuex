<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Application Structure | Table of Contents</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.2">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-prism/prism.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
    

        
    
    
    <link rel="next" href="./middlewares.html" />
    
    
    <link rel="prev" href="./data-flow.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="5"
        data-chapter-title="Application Structure"
        data-filepath="structure.md"
        data-basepath="."
        data-revision="Sun Mar 06 2016 21:40:16 GMT-0500 (EST)"
        data-innerlanguage="en">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="intro.html">
            
                
                    <a href="./intro.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        What is Vuex?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="getting-started.html">
            
                
                    <a href="./getting-started.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Getting Started
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" >
            
            <span><b>3.</b> Core Concepts</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="state.html">
            
                
                    <a href="./state.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        State and Getters
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="mutations.html">
            
                
                    <a href="./mutations.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Mutations
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="actions.html">
            
                
                    <a href="./actions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Actions
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="data-flow.html">
            
                
                    <a href="./data-flow.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Data Flow
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="5" data-path="structure.html">
            
                
                    <a href="./structure.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Application Structure
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="middlewares.html">
            
                
                    <a href="./middlewares.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Middlewares
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="strict.html">
            
                
                    <a href="./strict.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Strict Mode
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="forms.html">
            
                
                    <a href="./forms.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Form Handling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="testing.html">
            
                
                    <a href="./testing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Testing
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="hot-reload.html">
            
                
                    <a href="./hot-reload.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Hot Reloading
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="api.html">
            
                
                    <a href="./api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        API Reference
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Table of Contents</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="application-structure">Application Structure</h1>
<p>Vuex doesn&apos;t really restrict how you structure your code. Rather, it enforces a set of high-level principles:</p>
<ol>
<li><p>Application state is held in the store, as a single object.</p>
</li>
<li><p>The only way to mutate the state is by dispatching mutations on the store.</p>
</li>
<li><p>Mutations must be synchronous, and the only side effects they produce should be mutating the state.</p>
</li>
<li><p>We can expose a more expressive state mutation API by defining actions. Actions can encapsulate asynchronous logic such as data fetching, and the only side effects they produce should be dispatching mutations.</p>
</li>
<li><p>Components use getters to retrieve state from the store, and call actions to mutate the state.</p>
</li>
</ol>
<p>The nice thing about Vuex mutations, actions and getters is that <strong>they are all just functions</strong>. As long as you follow these rules, it&apos;s up to you how to structure your project. However, it&apos;s nice to have some conventions so that you can instantly become familiar with another project that uses Vuex, so here are some recommended structures depending on the scale of your app.</p>
<h3 id="simple-project">Simple Project</h3>
<p>For a simple project, we can simply define the <strong>store</strong> and the <strong>actions</strong> in respective files:</p>
<pre><code class="lang-bash"><span class="token punctuation">.</span>
&#x251C;&#x2500;&#x2500; index<span class="token punctuation">.</span>html
&#x251C;&#x2500;&#x2500; main<span class="token punctuation">.</span>js
&#x251C;&#x2500;&#x2500; components
&#x2502;   &#x251C;&#x2500;&#x2500; App<span class="token punctuation">.</span>vue
&#x2502;   &#x2514;&#x2500;&#x2500; <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
&#x2514;&#x2500;&#x2500; vuex
    &#x251C;&#x2500;&#x2500; store<span class="token punctuation">.</span>js     <span class="token comment" spellcheck="true"># exports the store (with initial state and mutations)
</span>    &#x2514;&#x2500;&#x2500; actions<span class="token punctuation">.</span>js   <span class="token comment" spellcheck="true"># exports all actions
</span></code></pre>
<p>For an actual example, check out the <a href="https://github.com/vuejs/vuex/tree/master/examples/counter" target="_blank">Counter example</a> or the <a href="https://github.com/vuejs/vuex/tree/master/examples/todomvc" target="_blank">TodoMVC example</a>.</p>
<p>Alternatively, you can also split out mutations into its own file.</p>
<h3 id="medium-to-large-project">Medium to Large Project</h3>
<p>For any non-trivial app, we probably want to further split Vuex-related code into multiple &quot;modules&quot; (roughly comparable to &quot;stores&quot; in vanilla Flux, and &quot;reducers&quot; in Redux), each dealing with a specific domain of our app. Each module would be managing a sub-tree of the state, exporting the initial state for that sub-tree and all mutations that operate on that sub-tree:</p>
<pre><code class="lang-bash">&#x251C;&#x2500;&#x2500; index<span class="token punctuation">.</span>html
&#x251C;&#x2500;&#x2500; main<span class="token punctuation">.</span>js
&#x251C;&#x2500;&#x2500; api
&#x2502;   &#x2514;&#x2500;&#x2500; <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment" spellcheck="true"># abstractions for making API requests
</span>&#x251C;&#x2500;&#x2500; components
&#x2502;   &#x251C;&#x2500;&#x2500; App<span class="token punctuation">.</span>vue
&#x2502;   &#x2514;&#x2500;&#x2500; <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
&#x2514;&#x2500;&#x2500; vuex
    &#x251C;&#x2500;&#x2500; actions<span class="token punctuation">.</span>js        <span class="token comment" spellcheck="true"># exports all actions
</span>    &#x251C;&#x2500;&#x2500; store<span class="token punctuation">.</span>js          <span class="token comment" spellcheck="true"># where we assemble modules and export the store
</span>    &#x251C;&#x2500;&#x2500; mutation<span class="token operator">-</span>types<span class="token punctuation">.</span>js <span class="token comment" spellcheck="true"># constants
</span>    &#x2514;&#x2500;&#x2500; modules
        &#x251C;&#x2500;&#x2500; cart<span class="token punctuation">.</span>js       <span class="token comment" spellcheck="true"># state and mutations for cart
</span>        &#x2514;&#x2500;&#x2500; products<span class="token punctuation">.</span>js   <span class="token comment" spellcheck="true"># state and mutations for products
</span></code></pre>
<p>A typical module looks like this:</p>
<pre><code class="lang-js"><span class="token comment" spellcheck="true">// vuex/modules/products.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  RECEIVE_PRODUCTS<span class="token punctuation">,</span>
  ADD_TO_CART
<span class="token punctuation">}</span> from <span class="token string">&apos;../mutation-types&apos;</span>

<span class="token comment" spellcheck="true">// initial state</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
  all<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// mutations</span>
<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>RECEIVE_PRODUCTS<span class="token punctuation">]</span> <span class="token punctuation">(</span>state<span class="token punctuation">,</span> products<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>all <span class="token operator">=</span> products
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token punctuation">[</span>ADD_TO_CART<span class="token punctuation">]</span> <span class="token punctuation">(</span>state<span class="token punctuation">,</span> productId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>all<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>p <span class="token operator">=</span><span class="token operator">&gt;</span> p<span class="token punctuation">.</span>id <span class="token operator">===</span> productId<span class="token punctuation">)</span><span class="token punctuation">.</span>inventory<span class="token operator">--</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  state<span class="token punctuation">,</span>
  mutations
<span class="token punctuation">}</span>
</code></pre>
<p>And in <code>vuex/store.js</code>, we &quot;assemble&quot; multiple modules together to create the Vuex instance:</p>
<pre><code class="lang-js"><span class="token comment" spellcheck="true">// vuex/store.js</span>
<span class="token keyword">import</span> Vue from <span class="token string">&apos;vue&apos;</span>
<span class="token keyword">import</span> Vuex from <span class="token string">&apos;../../../src&apos;</span>
<span class="token comment" spellcheck="true">// import parts from modules</span>
<span class="token keyword">import</span> cart from <span class="token string">&apos;./modules/cart&apos;</span>
<span class="token keyword">import</span> products from <span class="token string">&apos;./modules/products&apos;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// combine sub modules</span>
  modules<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    cart<span class="token punctuation">,</span>
    products
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Here, <code>cart</code> module&apos;s initial state will be attached to the root state tree as <code>store.state.cart</code>. In addition, <strong>all the mutations defined in a sub-module only receives the sub-state-tree they are associated with</strong>. So mutations defined in the <code>cart</code> module will receive <code>store.state.cart</code> as their first argument.</p>
<p>The root of the sub-state-tree is irreplaceable inside the module itself. For example this won&apos;t work:</p>
<pre><code class="lang-js"><span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span>
  SOME_MUTATION <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Instead, always store actual state as a property of the sub-tree root:</p>
<pre><code class="lang-js"><span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span>
  SOME_MUTATION <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Since all modules simply export objects and functions, they are quite easy to test and maintain, and can be hot-reloaded. You are also free to alter the patterns used here to find a structure that fits your preference.</p>
<p>Note that we do not put actions into modules, because a single action may dispatch mutations that affect multiple modules. It&apos;s also a good idea to decouple actions from the state shape and the implementation details of mutations for better separation of concerns. If the actions file gets too large, we can turn it into a folder and split out the implementations of long async actions into individual files.</p>
<p>For an actual example, check out the <a href="https://github.com/vuejs/vuex/tree/master/examples/shopping-cart" target="_blank">Shopping Cart Example</a>.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./data-flow.html" class="navigation navigation-prev " aria-label="Previous page: Data Flow"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./middlewares.html" class="navigation navigation-next " aria-label="Next page: Middlewares"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-github/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"edit-link":{"base":"https://github.com/vuejs/vuex/tree/master/docs","label":"Edit This Page"},"github":{"url":"https://github.com/vuejs/vuex/"},"prism":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
